> options(vsalen=4, vsatype="realhrr", vsacnorm=FALSE, vsaopnorm=FALSE)
> set.seed(1)
> m5 <- vsamem(memsize=5, type="db", datatype="int8")
> m5
RAM DB (int8) containing 5 realhrr[4]: NA, NA, NA ...
> a <- newVec()
> b <- newVec()
> c <- newVec()
> d <- newVec()
> e <- newVec()
> m5 <- vsamem(a, b, memsize=5, type="db", datatype="int8")
> m5
RAM DB (int8) containing 5 realhrr[4]: a, b, NA ...
> contents(m5)
               a          b <NA> <NA> <NA>
[1,] -0.31889764  0.1653543    0    0    0
[2,]  0.09448819 -0.4133858    0    0    0
[3,] -0.41338583  0.2480315    0    0    0
[4,]  0.80314960  0.3661417    0    0    0
> m5 <- setmem(m5, 4, d, label="d")
> m5
RAM DB (int8) containing 5 realhrr[4]: a, b, NA ...
> contents(m5)
               a          b <NA>           d <NA>
[1,] -0.31889764  0.1653543    0 -0.30708661    0
[2,]  0.09448819 -0.4133858    0 -1.11023622    0
[3,] -0.41338583  0.2480315    0  0.56692913    0
[4,]  0.80314960  0.3661417    0 -0.02362205    0
>
> m5 <- setmem(m5, "c", c)
> contents(m5)
               a          b          c           d <NA>
[1,] -0.31889764  0.1653543  0.2834646 -0.30708661    0
[2,]  0.09448819 -0.4133858 -0.1535433 -1.11023622    0
[3,] -0.41338583  0.2480315  0.7559055  0.56692913    0
[4,]  0.80314960  0.3661417  0.2007874 -0.02362205    0
> m5 <- setmem(m5, "e", e)
> contents(m5)
               a          b          c           d           e
[1,] -0.31889764  0.1653543  0.2834646 -0.30708661 -0.01181102
[2,]  0.09448819 -0.4133858 -0.1535433 -1.11023622  0.47244094
[3,] -0.41338583  0.2480315  0.7559055  0.56692913  0.41338583
[4,]  0.80314960  0.3661417  0.2007874 -0.02362205  0.29527559
>
> all.equal(contents(m5), cbind(a,b,c,d,e), tol=1e-2)
[1] TRUE
>
> memmags(m5)
[1] 0.9625803 0.6275423 0.8459530 1.2840924 0.6938411
> all.equal(as.numeric(sqrt(colSums(contents(m5)^2))), memmags(m5), tol=1e-6)
[1] TRUE
> dotmem(m5, a)
         a          b          c          d          e 
 0.9121923  0.1022537 -0.2533325 -0.2505425  0.1054622 
> dotmem(m5, a, cos=T)
         a          b          c          d          e 
 0.9894274  0.1701260 -0.3126650 -0.2037134  0.1586980 
> dotmem(m5, b, cos=T)
         a          b          c          d          e 
0.18190989 0.97855869 0.67528483 0.65245857 0.03279169 
> dot(a,b)
simval: 0.1033577
> cosine(a,b)
simval: 0.1725543
>
> contents(m5)
               a          b          c           d           e
[1,] -0.31889764  0.1653543  0.2834646 -0.30708661 -0.01181102
[2,]  0.09448819 -0.4133858 -0.1535433 -1.11023622  0.47244094
[3,] -0.41338583  0.2480315  0.7559055  0.56692913  0.41338583
[4,]  0.80314960  0.3661417  0.2007874 -0.02362205  0.29527559
> m5 <- setmem(m5, "a", c)
> contents(m5)
              a          b          c           d           e
[1,]  0.2834646  0.1653543  0.2834646 -0.30708661 -0.01181102
[2,] -0.1535433 -0.4133858 -0.1535433 -1.11023622  0.47244094
[3,]  0.7559055  0.2480315  0.7559055  0.56692913  0.41338583
[4,]  0.2007874  0.3661417  0.2007874 -0.02362205  0.29527559
> m5 <- setmem(m5, "a", a)
> contents(m5)
               a          b          c           d           e
[1,] -0.31889764  0.1653543  0.2834646 -0.30708661 -0.01181102
[2,]  0.09448819 -0.4133858 -0.1535433 -1.11023622  0.47244094
[3,] -0.41338583  0.2480315  0.7559055  0.56692913  0.41338583
[4,]  0.80314960  0.3661417  0.2007874 -0.02362205  0.29527559
> m5 <- setmem(m5, 5, d, lab="f")
> contents(m5)
               a          b          c           d           f
[1,] -0.31889764  0.1653543  0.2834646 -0.30708661 -0.30708661
[2,]  0.09448819 -0.4133858 -0.1535433 -1.11023622 -1.11023622
[3,] -0.41338583  0.2480315  0.7559055  0.56692913  0.56692913
[4,]  0.80314960  0.3661417  0.2007874 -0.02362205 -0.02362205
> memmags(m5)
[1] 0.9625803 0.6275423 0.8459530 1.2840924 1.2840924
> all.equal(as.numeric(sqrt(colSums(contents(m5)^2))), memmags(m5), tol=1e-6)
[1] TRUE
> 
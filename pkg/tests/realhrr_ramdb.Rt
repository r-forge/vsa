> options(vsalen=4, vsatype="realhrr", vsacnorm=FALSE, vsaopnorm=FALSE)
> m5 <- vsamem(memsize=5, type="db")
> a <- newVec()
> a[] <- round(a[], digits=2)
> b <- newVec()
> b[] <- round(b[], digits=2)
> c <- newVec()
> c[] <- round(c[], digits=2)
> d <- newVec()
> d[] <- round(d[], digits=2)
> e <- newVec()
> e[] <- round(e[], digits=2)
> m5 <- vsamem(a, b, memsize=5, type="db")
> m5
RAM DB (single precision) containing 5 realhrr[4]: a, b, NA ...
> contents.realhrr_ramdb(m5)
         a     b <NA> <NA> <NA>
[1,] -0.39  0.00    0    0    0
[2,]  0.48 -0.42    0    0    0
[3,] -0.75  0.32    0    0    0
[4,]  0.60  0.64    0    0    0
> m5 <- setmem(m5, 4, d, label="d")
> m5
RAM DB (single precision) containing 5 realhrr[4]: a, b, NA ...
> contents.realhrr_ramdb(m5)
         a     b <NA>     d <NA>
[1,] -0.39  0.00    0  0.02    0
[2,]  0.48 -0.42    0 -0.18    0
[3,] -0.75  0.32    0 -0.57    0
[4,]  0.60  0.64    0  0.27    0
>
> m5 <- setmem(m5, "c", c)
> contents.realhrr_ramdb(m5)
         a     b     c     d <NA>
[1,] -0.39  0.00 -0.31  0.02    0
[2,]  0.48 -0.42 -0.80 -0.18    0
[3,] -0.75  0.32  0.16 -0.57    0
[4,]  0.60  0.64  0.02  0.27    0
> m5 <- setmem(m5, "e", e)
> contents.realhrr_ramdb(m5)
         a     b     c     d     e
[1,] -0.39  0.00 -0.31  0.02  0.43
[2,]  0.48 -0.42 -0.80 -0.18  0.07
[3,] -0.75  0.32  0.16 -0.57 -0.16
[4,]  0.60  0.64  0.02  0.27  0.15
>
> all.equal(contents.realhrr_ramdb(m5), cbind(a,b,c,d,e), tol=1e-6)
[1] TRUE
>
> all.equal(as.numeric(sqrt(colSums(contents.realhrr_ramdb(m5)^2))), attr(m5, "mag"), tol=1e-6)
[1] TRUE
> dotmem(m5, a)
[1]  1.30500001 -0.05759998 -0.37110000  0.49530001  0.07590001
> dotmem(m5, a, cos=T)
[1]  1.00000001 -0.06077103 -0.37211717  0.66073310  0.13621952
> dotmem(m5, b, cos=T)
[1] -0.06077103  0.99999995  0.55224726  0.12122343  0.03805425
> dot(a,b)
simval: -0.0576
> cosine(a,b)
simval: -0.06077106
>
> contents(m5)
         a     b     c     d     e
[1,] -0.39  0.00 -0.31  0.02  0.43
[2,]  0.48 -0.42 -0.80 -0.18  0.07
[3,] -0.75  0.32  0.16 -0.57 -0.16
[4,]  0.60  0.64  0.02  0.27  0.15
> m5 <- setmem(m5, "a", c)
> contents(m5)
         a     b     c     d     e
[1,] -0.31  0.00 -0.31  0.02  0.43
[2,] -0.80 -0.42 -0.80 -0.18  0.07
[3,]  0.16  0.32  0.16 -0.57 -0.16
[4,]  0.02  0.64  0.02  0.27  0.15
> m5 <- setmem(m5, "a", a)
> contents(m5)
         a     b     c     d     e
[1,] -0.39  0.00 -0.31  0.02  0.43
[2,]  0.48 -0.42 -0.80 -0.18  0.07
[3,] -0.75  0.32  0.16 -0.57 -0.16
[4,]  0.60  0.64  0.02  0.27  0.15
> m5 <- setmem(m5, 5, d, lab="f")
> contents(m5)
         a     b     c     d     f
[1,] -0.39  0.00 -0.31  0.02  0.02
[2,]  0.48 -0.42 -0.80 -0.18 -0.18
[3,] -0.75  0.32  0.16 -0.57 -0.57
[4,]  0.60  0.64  0.02  0.27  0.27
> 